<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Modular consciousness field simulation engine with ABX-Core v1.3">
    <meta name="theme-color" content="#00ffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PsyFi">

    <title>PsyFi ‚Äì Consciousness Field Simulator</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/static/manifest.json">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="sigil">
                <div class="sigil-inner">
                    <span class="sigil-symbol">‚¨°</span>
                </div>
            </div>
            <h1 class="title">
                <span class="title-main">PsyFi</span>
                <span class="title-version">v0.1.0</span>
            </h1>
            <p class="subtitle">Consciousness Field Simulation Engine</p>
            <div class="lab-credit">Applied Alchemy Labs</div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Control Panel -->
            <section class="panel control-panel">
                <div class="panel-header">
                    <h2>‚öóÔ∏è Simulation Parameters</h2>
                </div>
                <div class="panel-body">
                    <form id="simulationForm">
                        <!-- Preset Selector -->
                        <div class="preset-selector">
                            <label>Quick Presets</label>
                            <div class="preset-buttons">
                                <button type="button" class="preset-btn" data-preset="quick">
                                    <span class="preset-icon">‚ö°</span>
                                    <span class="preset-name">Quick Test</span>
                                    <span class="preset-desc">32√ó32, 10 steps</span>
                                </button>
                                <button type="button" class="preset-btn" data-preset="standard">
                                    <span class="preset-icon">‚¨°</span>
                                    <span class="preset-name">Standard</span>
                                    <span class="preset-desc">64√ó64, 20 steps</span>
                                </button>
                                <button type="button" class="preset-btn" data-preset="detailed">
                                    <span class="preset-icon">‚ú®</span>
                                    <span class="preset-name">Detailed</span>
                                    <span class="preset-desc">128√ó128, 50 steps</span>
                                </button>
                                <button type="button" class="preset-btn" data-preset="deep">
                                    <span class="preset-icon">üåÄ</span>
                                    <span class="preset-name">Deep Dive</span>
                                    <span class="preset-desc">256√ó256, 100 steps</span>
                                </button>
                            </div>
                        </div>

                        <div class="divider"></div>

                        <div class="input-grid">
                            <div class="input-group">
                                <label for="width">Field Width</label>
                                <input type="number" id="width" name="width" value="64" min="8" max="512" required>
                                <span class="input-hint">8-512 px</span>
                            </div>
                            <div class="input-group">
                                <label for="height">Field Height</label>
                                <input type="number" id="height" name="height" value="64" min="8" max="512" required>
                                <span class="input-hint">8-512 px</span>
                            </div>
                            <div class="input-group">
                                <label for="steps">Evolution Steps</label>
                                <input type="number" id="steps" name="steps" value="20" min="1" max="1000" required>
                                <span class="input-hint">1-1000 iterations</span>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary" id="runButton">
                            <span class="btn-icon">‚ñ∂</span>
                            <span>Run Simulation</span>
                        </button>
                    </form>
                </div>
            </section>

            <!-- Results Panel -->
            <section class="panel results-panel" id="resultsPanel" style="display: none;">
                <div class="panel-header">
                    <h2>üåå Field Metrics</h2>
                    <div class="field-dimensions" id="fieldDimensions"></div>
                </div>
                <div class="panel-body">
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-label">Valence</div>
                            <div class="metric-value" id="valence">--</div>
                            <div class="metric-bar">
                                <div class="metric-bar-fill" id="valenceBar"></div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Coherence</div>
                            <div class="metric-value" id="coherence">--</div>
                            <div class="metric-bar">
                                <div class="metric-bar-fill" id="coherenceBar"></div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Symmetry</div>
                            <div class="metric-value" id="symmetry">--</div>
                            <div class="metric-bar">
                                <div class="metric-bar-fill" id="symmetryBar"></div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Roughness</div>
                            <div class="metric-value" id="roughness">--</div>
                            <div class="metric-bar">
                                <div class="metric-bar-fill" id="roughnessBar"></div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Richness</div>
                            <div class="metric-value" id="richness">--</div>
                            <div class="metric-bar">
                                <div class="metric-bar-fill" id="richnessBar"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Error Panel -->
            <section class="panel error-panel" id="errorPanel" style="display: none;">
                <div class="panel-header error-header">
                    <h2>‚ö†Ô∏è Error</h2>
                </div>
                <div class="panel-body">
                    <pre id="errorMessage"></pre>
                </div>
            </section>

            <!-- Loading State -->
            <div class="loading-overlay" id="loadingOverlay" style="display: none;">
                <div class="spinner"></div>
                <p>Computing consciousness field...</p>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-links">
                <a href="/docs" target="_blank">API Docs</a>
                <span class="separator">‚Ä¢</span>
                <a href="https://github.com/scrimshawlife-ctrl/Psy-Fi" target="_blank">GitHub</a>
                <span class="separator">‚Ä¢</span>
                <span class="abx-badge">ABX-Core v1.3</span>
            </div>
        </footer>
    </div>

    <script src="/static/app.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/static/sw.js')
                    .then(reg => console.log('[PWA] Service Worker registered'))
                    .catch(err => console.log('[PWA] Service Worker registration failed:', err));
            });
        }
    </script>
</body>
</html>
